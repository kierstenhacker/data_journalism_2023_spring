---
title: "Reverse Engineering Project"
author: "Kiersten Hacker and Sherwin Esguerra"
date: "4-2-2023"
output:
  html_document:
    theme: cerulean
    highlight: pygments
    toc: true
    toc_float:
      collapsed: true
      smooth_scroll: false
---

```{r setup, include=FALSE}
knitr::opts_chunk$set(echo = TRUE)
```

## Introduction 

In this notebook, we are reverse engineering the story, "Nearly 250 women have been
fatally shot by police since 2015" https://www.washingtonpost.com/graphics/2020/investigations/police-shootings-women/

## Load libraries

Loading required libraries for this analysis.

```{r echo=FALSE, message=FALSE}
library(tidyverse)
library(lubridate)
library(refinr)
library(janitor)
```

## Load and Cleaning Data

In this section, describe the source of the data, write a basic data dictionary for data you are working with, and discuss any caveats or issues you discovered working with this data. 

**The data came from The Washington Post's database to track fatal police shootings since 2015 that the organization built through different reporting methods. The data came from local news sources, law enforcement websites and other open databases in addition to other data-gathering techniques. This notebook contains different data frames that have broken down the data into totals and percentages of killings based on race, gender and whether the shooting victim was armed or had mental health issues. There are other values from the analysis saved as we worked to display different outcomes to verify the numbers presented in the original article. When working with this data, we realized that it has been updated since 2015, so it includes more values than the original data used in the article published in The Washington Post. Because of this, some of the results do not match exactly with the original analysis results from the piece.**
```{r}
# Read in the data
fatal_police_shootings<- read_csv("data/fatal_police_shootings_data.csv")
glimpse(fatal_police_shootings)
```

## Sentences to Engineer
In this notebook, we are reverse engineering five sentences from the story.

### Sentence 1

* **Sentence text**: "About 31 percent, or 77, of the 247 women fatally shot by police since 2015 had mental health issues, compared to 22 percent of the 5,362 men killed."
* **Analysis summary**: Our findings match at a similar rate with the numbers from the original sentence. However, because our data is updated to include more values after 2015, our numbers for the number of mentally ill women shot were higher and the percentage of mentally ill women shot out of total women shot was also higher. For men, the total number of individuals who were shot was higher, but the percentage of men who had mental health issues that were fatally shot was lower than the value in the original piece.

```{r}
# Find total number of women shot since 2015
women_shot_count <- fatal_police_shootings %>%
  filter(gender == "female") %>%
  summarise(
    count = n()
    )
```
```{r}
# Find the number of women shot with mental health issues
women_mental_illness <- fatal_police_shootings %>%
  filter(was_mental_illness_related == TRUE & gender == "female") %>%
   summarise (
    count = n()
  )
```

```{r}
# Find the percentage of women with mental illness shot
women_mental_illness_pct <- women_mental_illness %>%
  mutate(
    pct_mentally_ill = women_mental_illness/women_shot_count*100
  )
```

```{r} 
# Find the total number of men shot since 2015
men_shot <- fatal_police_shootings %>%
  filter(gender == "male") %>%
  summarise(
    count = n()
    )
```

```{r}
# Find the number of men shot with mental health issues
men_mental_illness <- fatal_police_shootings %>%
  filter(was_mental_illness_related == TRUE & gender == "male") %>%
   summarise (
    count = n()
   )
```

```{r}
# Find the percentage of men with mental illness shot
men_mental_illness_pct <- men_mental_illness %>%
  mutate(
    pct_mentally_ill = men_mental_illness/men_shot*100
  )
```

### Sentence 2

* **Sentence text**: "Twenty of the 247 women were killed in that kind of situation, analysis shows. In 12 of those 20 shootings, police said the women killed were caught in crossfire or shot accidentally."
* **Analysis summary**: Again, because our data is updated, our analysis found that there were 35 unarmed women who were fatally shot by police. Of those 35 unarmed women killed, we found that 20 of them were killed by accident or "caught in the crossfire." So, we were unable to verify the numbers from the sentence published, but our analysis returned similar results given the new data points added.

```{r}
#Find the total number of women shot
women_shot <- fatal_police_shootings %>%
  filter(gender == "female")

#Filter for women shot who were unarmed and count the total
women_shot %>%
  filter(armed_with == "unarmed") %>%
    summarise(
    count_unarmed = n()
    )
```
```{r}
#Filter for women shot by accident who were also unarmed
women_shot %>%
  filter(armed_with == "unarmed" & threat_type == "accident")
```

```{r}
#Count the women shot by accident who were unarmed to find the total
women_shot %>%
  filter(armed_with == "unarmed" & threat_type == "accident") %>%
    summarise(
      count_accident = n()
    )
```

### Sentence 3

* **Sentence text**: "Since 2015, police have killed 26 unarmed women, including Taylor. Of those, 14 were White, seven were Black, four were Hispanic and one’s race was unknown. While about twice as many White women were shot and killed as Black women, White women account for five times the Black female population."
* **Analysis summary**: Our analysis found 35 unarmed women were killed. Of those, 17 were white, 8 were Black, 8 were Hispanic and 2 yielded an NA. When checking with today's population numbers, our analysis found that white women make up about 5.57 times the the Black female population, which is similar to the rate in the article. 

```{r}
#Count the number of unarmed women by race who were shot 
women_shot %>%
  filter(armed_with == "unarmed") %>%
  group_by(race) %>%
  summarise (
    count_race = n()
  )
  
```

```{r}
#Find the number of white women and Black women in the population. 
  #Female population based on the total of 334485017 and the percentage of females of 50.5% according to   U.S. Census data 
  334485017 * 0.505
```
```{r}
#Find the total population of Black women based on the percentages
168914934 * 0.136
```
```{r}
#Find the total population of white women based on the percentages
168914934 * 0.758
```
```{r}
#Divide the number of white women by the number of Black women to check if white women make up about 5 times the Black female population
128037520/22972431
```

### Sentence 4

* **Sentence text**: "Since 2015, Black women have accounted for less than 1 percent of the overall fatal shootings in cases where race was known. But within this small subset, Black women, who are 13 percent of the female population, account for 20 percent of the women shot and killed and 28 percent of the unarmed deaths."
* **Analysis summary**: We were able to confirm that black women account for less than 1 percent of overall cases where race was known at 0.967%. We were also able to verify that black women are about 13.6% of the female population. However, they only account for about 18% of women shot and killed. Additionally, black women account for only 14% of unarmed deaths, which is about half of what the story stated.

```{r}
# Find all cases where race was known
shootings_race_known <- fatal_police_shootings %>% 
  filter(!is.na(race)) %>% 
  group_by(race) %>% 
  summarise(
    count_race = n()
  )
# Display results of code below this codeblock
shootings_race_known
```
```{r}
#Find incidents where black women were shot
black_women_shot <- fatal_police_shootings %>% 
  filter(race=="B" & gender == "female") %>% 
  summarise(
    count_black_women_shot = n()
  )
black_women_shout_count<- 69
black_women_shot
```

```{r}
#total for number of cases where race was known
shootings_race_total <- fatal_police_shootings %>% 
  filter(!is.na(race)) %>% 
  summarise(
    count_races_known = n()
  )
shootings_race_total
#percentage of black women compared to all cases where race was known
black_women_comp_all_races<-69/7135*100
#black women compared to female population
black_female_pop_perc<- 22972431/168914934*100
```
```{r}
#black women shot compared to all women shot and killed
blk_women_shot_perc <- black_women_shot/women_shot_count*100
#find the total of all cases where someone shot was unarmed
total_unarmed_shot <- fatal_police_shootings %>% 
  filter(armed_with == "unarmed") %>% 
  summarise(
    count_unarmed_shot = n()
  )
unarmed_shot_count <- 466
total_unarmed_shot
#black women shot compared to all unarmed who were shot
blk_women_comp_unarmed<- black_women_shot/unarmed_shot_count*100
```
### Sentence 5

* **Sentence text**: “The starkest difference between women and men is the rate: Women account for about half the population, but 4 percent of the killings. Of those fatally shot every year, about 44 have been women.”
* **Analysis summary**: We were able to confirm that since 2015 there have been about 44 women fatally shot by police every year. The years 2018 and 2021 could be outliers since there were 52 and 56 women shot respectively. So far in 2023 there were only six women fatally shot, but the whole year has not been recorded yet. From our analysis, we found that women made up 4.4% of the killings which is similar to the story's finding. Again, since our data is updated, this could cause the discrepancy.  

```{r}
women_shot_count/8269*100

total_perc_women_shot <- 4.42617

fatal_police_shootings_years <- fatal_police_shootings %>% 
  mutate(year = year(date))

fatal_police_shootings_years %>%
  filter(gender == "female") %>%
  group_by (year) %>%
  summarise (
    count_id = n()
  )
```


```{r}
